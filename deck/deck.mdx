import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { demo, code, deck } from "./theme";
import { Example, Layout } from './layout';

export const theme = deck;

<Layout>

# Remixing Constraint Validation

<div styles={{ textAlign: 'right '}}>Edmund Hung @ Remix Conf 2023</div>

</Layout>

---

<Layout>

## A browser mechanism for form validation

<center>#UseThePlatform</center>

</Layout>

---

<CodeSurferColumns themes={[demo, code]} sizes={[1,2]}>

<Step>

<Example src="./examples/1a" />

```jsx file=./01a.jsx title="HTML Form"
```

</Step>

<Step>

<Example src="./examples/1b" />

```jsx file=./01b.jsx title="Validation Attributes"
```

</Step>

<Step>

<Example src="./examples/1c" />

```jsx file=./01c.jsx title="Validation Attributes"
```

</Step>

<Step>

<Example src="./examples/1c" />

```diff title="Overview"
```

</Step>

<Step>

<Example src="./examples/2a" />

```jsx file=./02a.jsx title="Disable brower validation"
```

</Step>

<Step>

<Example src="./examples/2b" />

```jsx file=./02b.jsx title="Enhancing form validation with reportValidty"
```

</Step>

<Step>

<Example src="./examples/3a" />

```jsx file=./03a.jsx title="Customizing messages with setCustomValidity"
```

</Step>

<Step>

<Example src="./examples/3b" />

```jsx file=./03b.jsx title="Inspect errors through the ValidityState"
```

</Step>

<Step>

<Example src="./examples/3c" />

```jsx file=./03c.jsx title="Manual Validation with the FormData"
```

</Step>

<Step>

<Example src="./examples/3c" />

```diff 3:31 title="Overview"
```

</Step>

<Step>

<Example src="./examples/4a" />

```jsx 35,40:49 file=./04a.jsx title="Capturing messages through invalid event"
```

</Step>

<Step>

<Example src="./examples/4b" />

```jsx file=./04b.jsx title="Displaying error next to the input"
```

</Step>

<Step>

<Example src="./examples/4c" />

```jsx file=./04c.jsx title="Clearing error before reporting"
```

</Step>

<Step>

<Example src="./examples/4c" />

```diff 34:67 title="Finish"
```

</Step>

</CodeSurferColumns>

---

<Layout>

## How about the server?

</Layout>

---

<Layout>

## The secret sauce ðŸ”¥: @conform-to/validitystate

- A package for you to validate on the server with the ValidityState 
- Type inference support
- 0kb on the client. You need it only on the server

</Layout>

---

<CodeSurferColumns themes={[demo, code]} sizes={[1,2]}>

<Step>

<Example src="./examples/4c" />

```jsx 68:99 file=./04c.jsx
```

</Step>

<Step>

<Example src="./examples/5a" />

```jsx 90,99,108 file=./05a.jsx title="Extract the constraint of each form control as the schema"
```
</Step>

<Step>

<Example src="./examples/5a" />

```diff 4:19 title="Extract the constraint of each form control as the schema"
```
</Step>

<Step>

<Example src="./examples/5b" />

```jsx 1 file=./05b.jsx title="Import the parse helper"
```

</Step>

<Step>

<Example src="./examples/5b" />

```diff 54:66 title="Parse formData based on the schema"
```

</Step>

<Step>

<Example src="./examples/5c" />

```jsx 69:77 file=./05c.jsx title="Sync error with the client"
```

</Step>

</CodeSurferColumns>

---

<Layout>

## Comparision

</Layout>

---

<Layout>

## Learn more

https://edmund.dev/blog/remixing-constraint-validation

@_edmundhung

</Layout>